<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Tutorial: Problem and Solution - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Board.html">Board</a><ul class='methods'><li data-type='method'><a href="module-Board.html#addCircuit">addCircuit</a></li><li data-type='method'><a href="module-Board.html#Board">Board</a></li><li data-type='method'><a href="module-Board.html#getActiveSources">getActiveSources</a></li><li data-type='method'><a href="module-Board.html#hasType">hasType</a></li><li data-type='method'><a href="module-Board.html#hasUnfinishedNode">hasUnfinishedNode</a></li><li data-type='method'><a href="module-Board.html#place">place</a></li><li data-type='method'><a href="module-Board.html#remove">remove</a></li></ul></li><li><a href="module-Circuit.html">Circuit</a><ul class='methods'><li data-type='method'><a href="module-Circuit.html#addNode">addNode</a></li><li data-type='method'><a href="module-Circuit.html#addToBoard">addToBoard</a></li><li data-type='method'><a href="module-Circuit.html#setGround">setGround</a></li></ul></li><li><a href="module-Component.html">Component</a><ul class='methods'><li data-type='method'><a href="module-Component.html#.hasDuplicatePositions">hasDuplicatePositions</a></li><li data-type='method'><a href="module-Component.html#getOtherPins">getOtherPins</a></li><li data-type='method'><a href="module-Component.html#place">place</a></li><li data-type='method'><a href="module-Component.html#remove">remove</a></li></ul></li><li><a href="module-Slot.html">Slot</a><ul class='methods'><li data-type='method'><a href="module-Slot.html#add">add</a></li><li data-type='method'><a href="module-Slot.html#remove">remove</a></li></ul></li><li><a href="module-Traverser.html">Traverser</a><ul class='methods'><li data-type='method'><a href="module-Traverser.html#start">start</a></li><li data-type='method'><a href="module-Traverser.html#Traverser">Traverser</a></li></ul></li><li><a href="module-Utility.html">Utility</a><ul class='methods'><li data-type='method'><a href="module-Utility.html#.hasDuplicatePositions">hasDuplicatePositions</a></li><li data-type='method'><a href="module-Utility.html#.isNumber">isNumber</a></li><li data-type='method'><a href="module-Utility.html#.logger">logger</a></li></ul></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-problem-and-solution.html">Problem and Solution</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Tutorial: Problem and Solution</h1>
    

    <section>

<header>
    

    <h2>Problem and Solution</h2>
</header>

<article>
    <blockquote>
<p>Note: This is <strong><em>NOT</em></strong> a tutorial. I am putting this document here because I want it to be together with the project's docs and because there's only one way to include my own docs in JSDoc, which is in the tutorial.</p>
</blockquote>
<h2><a name="problem-1"></a>Problem #1</h2><blockquote>
<p>If your finger touches your hand, does your hand feel your finger first, or the other way round?</p>
</blockquote>
<p>Assuming the following code:</p>
<pre class="prettyprint source lang-javascript"><code>var batt = new Battery(),
    wire = new Wire();

batt.P.to(wire.A); // battery's 'Positive' end connect-to wire's 'A' end
// in the reality, this should have the same effects as &quot;wire.A.to(batt.P)&quot;</code></pre><p>In other words, when one end of a wire is placed on top of the battery's end, which one should be &quot;connected&quot; to the other? Which one should change the state of the other, or both?</p>
<h3>Solution:</h3><p>Instead of one end connecting to the other, we have a middle-person to handle the connections - a slot, or position of a grid.
Now, the code would look something more like this (assuming there's a grid object that &quot;owns&quot; the coordinates)</p>
<pre class="prettyprint source lang-javascript"><code>var batt = new Battery(),
    wire = new Wire();

batt.P.to(1,1); // to(x,y) - coordinates of a grid or board
wire.A.to(1,1);</code></pre><p>If you think about it now, the grid object can then store / manipulate the states for both the components to interact with!</p>
<p><br></p>
<h2><a name="problem-2"></a>Problem #2</h2><p>Now that I know how components can 'connect', I still don't know how to put a lot of things together
i.e. how are we going to calculate the voltage, conductance, etc? The major obstacle I have for this project is my lack of (or almost negligible) experience
and understanding in the field of electrical / electronic. The good thing is that there are tons of resources online such as the conceptual
way of how circuit sims work (see Resources Section, too lazy to reference anything at this point).</p>
<h3>Solution:</h3><p>After doing some reading, I realised that there are just a <em>whole lot</em> more than Ohm's Law and Kirchhoff's Law to developing a complete circuit sim.
One of the things for me to learn is <strong>Nodal Analysis</strong> + Gaussian Elimination (to solve the system of linear equations from it). However, Nodal Analysis
will not be enough since it's just for DC Analysis only. Either way, this is still a good start for me to take on this project.</p>
<p><br></p>
<h2><a name="problem-3"></a>Problem #3</h2><blockquote>
<p><em>&quot;Ground control to Major Tom...&quot;</em></p>
</blockquote>
<p>As I am trying to make Nodal Analysis the one method to rule them all (KCL &amp; KVL) for DC analysis, I have found myself to be in a pickle. One of the steps of Nodal Analysis is to choose a reference node and mark the node voltage to 0, and we can then calculate the other nodes' voltages with reference to it i.e., we have to 'make' a node the <em>ground</em> of the circuit. Which leads to the problem - how should I decide where the ground should be? If a different node is chosen as a ground, wouldn't that give a different result? What would be the criteria for a node to be best suited as the ground?</p>
<h2>Solution:</h2><p>So how am I to decide what is the best / ideal place for a ground? Answer, I don't. As I am not aiming to write a software that provides advice or to decide the best solution for the user, what I can do is to leave that responsibility to the user him/herself. In other words, the user will decide and add the ground 'component' onto the circuit.</p>
<blockquote>
<p><em>Create tools to not show what things should be, but what things can be! Unless it's a code linter.</em></p>
</blockquote>
<p>Main take away: Remind yourself of the reason for doing the project, and what it is for.</p>
<p><br></p>
<h2><a name="problem-4"></a>Problem #4</h2><p>While I was practising Nodal Analysis with various simple circuits, I came across a challenge - how do I write the KCL equation for a node with a branch that only has a voltage source i.e. a V-branch? Since the branch does not have (significant) resistance, how am I going to calculate the current in that branch?</p>
<center>
<img src="../image/p4_vbranch.jpg" alt="P4 V-branch">
<br>
<em>Highlighted in red: V-Branch a.k.a. evil branch as said by L.R.Linares</em>
</center>

<p>The easiest way is to place the ground component at the negative end of the source, but remember, for the solution to <a href="#problem-3">Problem #3</a> we are giving the user the freedom to place the ground anywhere.</p>
<p>Assuming the following circuit is what I am trying to solve:</p>
<center>
<img src="../image/p4_simple-circuit.jpg" alt="P4 Circuit">
</center>

<p>KCL for Node 1: </p>
<pre>
    -I + (V<sub>1</sub>-V<sub>2</sub>)/5 + (V<sub>1</sub>)/10   = 0
    3V<sub>1</sub> - 2V<sub>2</sub> - 10I            = 0 // equation #1
</pre>
KCL for Node 2:
<pre>
    I + (V<sub>2</sub>-V<sub>1</sub>)/5 + 2(V<sub>2</sub>/5)    = 0
    -V<sub>1</sub> + 3V<sub>2</sub> + 5I             = 0 // equation #2
</pre> 

<p>So now, I have three variables V<sub>1</sub>, V<sub>2</sub> and <code>I</code> to solve but only 2 equations... <em>sadFace.jpg</em>.<center></center></p>
<h2>Solution:</h2><p>Turns out this could be easily solved by introducing a simple equation for the V-branch:</p>
<center><pre>V<sub>+</sub> = V<sub>-</sub> + V<sub>source</sub></pre></center>

<p>Explanation: <code>Voltage at positive end = Voltage at negative end + Voltage of source</code></p>
<p>And that's it! What I have now is the equation V<sub>1</sub> = V<sub>2</sub> + 10V, and I just have to sub that into equations #1 and #2 then we'll be left with only two variables for two equations!</p>
<pre>
Equation #1
3V<sub>1</sub> - 2V<sub>2</sub> - 10I         = 0
3(V<sub>2</sub> + 10V) - 2V<sub>2</sub> - 10I = 0
V<sub>2</sub> - 10I                = -30V

Equation #2
-V<sub>1</sub> + 3V<sub>2</sub> + 5I           = 0
-(V<sub>2</sub> + 10V)> + 3V<sub>2</sub> + 5I  = 0
2V<sub>2</sub> + 5I                 = 10V
</pre>

<p>After substitution / Gaussian elimination, we get V<sub>2</sub> = -2V and <code>I</code> = 2.8A.
With that, we can continue solving for V<sub>1</sub> and the rest of the circuit. Big thanks to L.R.Linares' video on Modified Nodal Analysis that provided me with the V-branch equation, the key to solving this problem. </p>
<p><br></p>
<h2><a name="problem-5"></a>Problem #5</h2><p>I need to solve a system of linear equations, KCL equations in particular, for Nodal Analysis. <a href="http://algebra.js.org/">Algebra.js</a> seems to be just the maths library I need, since it has <code>algebra.parse</code> to parse string into a simplified expression (go check it out, it's awesome!). Now, the problem is getting the KCL equation for each node - how is that suppose to work?</p>
<h2>(Potential) Solution</h2><p>I haven't come up with one solid solution yet; however, what I have in mind now is for the traverser to go through each Circuit's node and have it to traverse each of the node's branches until it reaches another node or the ground. During the branch traversal, it will record the all resistance and voltage values for that branch in a Branch object.</p>
<p>After creating and populating the Branch objects, the Circuit object will then generate the KCL equation for each Node. For Branches with no resistance i.e., a V-branch, it will be expressed as <code>I</code> (polarity will based on the direction of current. Refer to <a href="#problem-3">Problem #3</a> for details calculating with a V-branch). Then, the generated KCL equations will be <code>algebra.parse</code>-ed, and we will get a system of simplified equations. 'Simplified' as in there's only one variable in the equation.</p>
<p>After getting the KCL equations, I will need a way to extract the values and variables so that they can be 'Gaussion Eliminated'... so on and so forth until we get the voltage values for each node. </p>
<p><br></p>
<hr>
<h2><a name="resources"></a>Resources</h2><ol>
<li><a href="https://electronics.stackexchange.com/questions/91416/how-do-circuit-simulators-actually-work/91437#91437?newreg=6cdfc012e3d74ac08ddb38d4c5ca9844">How do Circuit Simulators actually work?</a></li>
<li><a href="http://www.ecircuitcenter.com/SpiceTopics/Overview/Overview.htm">SPICE ALGORITHM OVERVIEW</a></li>
<li><a href="http://mathonweb.com/help/backgd5.htm">Nodal Analysis</a></li>
<li><a href="https://www.youtube.com/watch?v=MczLK6143kg">Youtube - Types of Branches by L.R.Linares</a></li>
<li><a href="https://www.youtube.com/watch?v=UGwwX4joijY">Youtube - Modified Nodal Analysis by L.R.Linares</a></li>
</ol>
<h2><a name="others"></a>Other Circuit Sims (or the like)</h2><ol>
<li><a href="http://www.falstad.com/circuit">Falstad's</a></li>
<li><a href="http://everycircuit.com/">EveryCircuit</a></li>
<li><a href="http://dcaclab.com/en/home">DC/ACLab</a></li>
<li><a href="https://github.com/hraberg/krets">Krets</a> - Has load of external links too</li>
<li><a href="https://123d.circuits.io/">Adobe 123D Circuits</a> - Nice graphics + Programmable Arduino = Mind blown</li>
<li><a href="https://github.com/circuitsim/circuit-simulator">Thom Wright's Circuit Sim</a> - pretty cool, pretty UI</li>
<li><a href="https://kazuhikoarase.github.io/simcirjs/">Kazuhiko Arase's Circuit Sim</a> - Another cool HTML5/JS circuit sim</li>
<li><a href="https://github.com/concord-consortium/circuit-solver">Sam Fentress @ Concord Consortium's Circuit Solver</a> - Not a sim, but it's almost one!</li>
</ol>
</article>

</section>

</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Wed Jul 13 2016 22:39:55 GMT+0100 (GMT Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>